import numpy as np
import cv2

air_K_l = np.array([[
                    3291.181322249521,
                    0.0,
                    1510.08637472
                ],
                [
                    0.0,
                    3291.181322249521,
                    986.0160617
                ],
                [
                    0.0,
                    0.0,
                    1.0
                ]])

air_K_r = np.array([
                [
                    3302.023790071393,
                    0.0,
                    1493.22488246
                ],
                [
                    0.0,
                    3302.023790071393,
                    996.53835531
                ],
                [
                    0.0,
                    0.0,
                    1.0
                ]
            ])
D_l = 40.0
D_r = 40.0

n_l_brut = np.array([0.01826953, -0.01171918, 0.9997644], dtype=np.float64)
n_r_brut = np.array([-0.02498697, -0.00409035, 0.99967941], dtype=np.float64)

n_r = n_r_brut / np.linalg.norm(n_r_brut)
n_l = n_l_brut / np.linalg.norm(n_l_brut)


# n_l = np.array([
#                 0.03223987,
#                 0.0119772,
#                 0.99940839
#             ])

# n_r = np.array([
#                 -0.04773011,
#                 -0.02050776,
#                 0.99864972
#             ])

THICKNESS = 13
ETA_GLASS = 1.492
ETA_WATER = 1.34

Rc = np.array([-0.65741284, 9.19567167, -3.20664961], dtype=np.float64) # deg
Tc = - np.array([-218.32875083, -5.95499246, 20.59005131], dtype=np.float64)


# calcule avec le main :
R_DG = np.array([[ 0.98558949,  0.05477774,  0.16003985],
                 [-0.05661481,  0.99837199, 0.00693828],
                 [-0.15939924, -0.01589892,  0.98708617]], dtype=np.float64)
t_DG = Tc


if __name__ == "__main__" :
    Rc_rad = Rc * np.pi / 180
    R_DG_calc, _ = cv2.Rodrigues(Rc_rad)
    print(R_DG_calc)




# RotationDroiteGauche = np.array([
#                 [
#                     0.9876747465511829,
#                     0.055341799355090704,
#                     0.14640997325728025
#                 ],
#                 [
#                     -0.05565357539749087,
#                     0.998448197144244,
#                     -0.0019690517729844233
#                 ],
#                 [
#                     -0.14629174471080872,
#                     -0.006203455774790089,
#                     0.989222039061968
#                 ]
#             ])

# TranslationDroiteGauche = np.array([
#                 210.29701361,
#                 7.24916971,
#                 -19.77955875
#             ])
